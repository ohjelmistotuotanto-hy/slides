% Ohjelmistotuotanto
% Matti Luukkainen ja ohjaajat Jami Kousa, Tero Tapio, Mauri Karlin
% syksy 2019
#  

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Luento 4

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4.11.2019

# nopea kertaus eilseltä

- User story
  - "määritelmä”:
  - description
  - conversations
  - acceptance criteria
- INVEST 
- Estimointi
  - Miksi? Miten? Kuka?
- Product Backlog
  - Kuka vastuussa?
  - Miten saadaan projektin alussa muodostettua?

# Hyvä product backlog on DEEP

- Mike Cohn lanseerasi lyhenteen DEEP kuvaamaan hyvän backlogin ominaisuuksia
  - Detailed appropriatly
  - Estimated
  - Emergent
  - Prioritized

. . .

- _Detailed appropriately_ eli sopivan detaljoitu
  - ylempänä tarkkoja
  - alempana suurpiirteisempiä

#

![](https://ohjelmistotuotanto-hy.github.io/images/2-9.png){ width=350 }

# 

- _Emergent_ kuvaa backlogin muuttuvaa luonnetta:
  - uusia storyja tulee
  - vanhoja poistetaa, uudelleenpriorisoidaan ja uudelleenestimoidaan, muokataan ja pilkotaan

. . .

- Muuttuvan luonteen takia backlogia tulee hoitaa (backlog grooming/refinement) projektin edetessä
  - pääasiallinen vastuu on product ownerilla
  - backlogin hoitamiseen osallistuu koko ohjelmistotuotantotiimi
  - Scrum suosittelee että noin 10% sprintin työajasta käytetään backlog groomingiin

# "Ready" story ja epiikki

- Hyvä story on siis INVEST (independent, negotiable, valuable, estimable, small, testable)
- DEEP taas taas sanoo, että backlogin pitää olla sopivan detaljoitu 

. . .

- INVEST päteekin vain backlogin korkeamman prioriteetin storyihin
- Joskus sanotaan että story on _ready_, kun se on valmiina toteutettavaksi (hyvin tunnettu ja INVEST)

. . .

- Alemman prioriteetin stoorit voivat olla _epiikkejä_ (epic): scope ei tiedossa, ei mielekästä estimoida



# Velositeetti

- Estimoinnin yksi tarkoitus on mahdollistaa koko projektin viemän aikamäärän summittainen arviointi

. . .

- Estimoinnin yksikkönä on abstrakti käsite _story point_, miten sen avulla voidaan arvioida projektin kestoa?

. . .

- Kehitystiimin _velositeetti_ (engl velocity) tarjoaa osittaisen ratkaisun tähän 

- Velositeetilla tarkoitetaan _tiimin keskimäärin yhdessä sprintissä toteuttamien story pointtien määrää_

. . .

- Jos velositeetti on selvillä ja projektissa toteutettavaksi tarkoitetut storyt on estimoitu, lasketaan projektin kestoarvio seuraavasti

_(User storyjen estimaattien summa) / velositeetti * sprintin pituus_


#  

- Projektin alkaessa velositeetti ei ole selvillä, ellei kyseessä ole jo yhdessä työskennellyt tiimi

- Velositeetti vaihtelee alussa melko paljon 
  - Estimointi aluksi vaikeampaa varsinkin jos sovellusalue ja käytetyt teknologiat eivät ole täysin tuttuja

![](https://ohjelmistotuotanto-hy.github.io/images/2-11.png){ width=300 }

- Velositeetti ja siihen perustuva projektin keston arvio alkaakin tarkentumaan pikkuhiljaa


#

- Ketterissä menetelmissä on oleellista kuvata mahdollisimman realistisesti projektin etenemistä
- Velositeettiin lasketaan mukaan ainoastaan definition of donen mukaisesti toteutetut storyt
  - "lähes valmiiksi" tehtyä työtä ei siis katsota ollenkaan tehdyksi työksi

![](https://ohjelmistotuotanto-hy.github.io/images/2-12.png){ width=350 }

# Burndown 

- Projektin etenemistä kuvataan yleensä release burndown -kaavion avulla

![](https://ohjelmistotuotanto-hy.github.io/images/2-13.png){ width=350 }

# Burnup

- Tuo selkeämmin esiin kesken projektin etenemisen tapahtuvan työmäärän kasvun

![](https://ohjelmistotuotanto-hy.github.io/images/2-14.png){ width=350 }

# Kannattaako estimointi - #NoEstimates

# Sprintin suunnittelu

. . .

- Kertauksena viime viikolta: Scrum määrittelee pidettäväksi ennen jokaista sprinttiä suunnittelupalaverin
- Palaverin ensimmäinen tavoite on selvittää *mitä* sprintin aikana tehdään

. . .

- Lähtökohtana on sopivassa tilassa oleva eli DEEP product backlog
- Product owner esittelee backlogin kärjessä olevat vaatimukset
- Tiimin on tarkoitus olla riittävällä tasolla selvillä mitä vaatimuksilla tarkoitetaan

. . .

- Tiimi valitsee tehtäväksi niin monta backlogin storyistaa kuin se arvioi kykenevänsä sprintin aikana toteuttamaan definition of donen määrittelemällä laatutasolla

# Sprintin tavoite

- Suunnittelun yhteydessä määritellään _sprintin tavoite_ (sprint goal)
- Lyhyt, yhden tai kahden lauseen kuvausta siitä, mitä tiimi on aikeissa sprintin aikana tehdä

. . .

- K. Schwaber ensimmäisen sprintin tavoitte _demonstrate a key piece of user functionality on the selected technology_
- Esimeriksi verkkokauppaa kehitettäessä sprinttien tavoitteita voisivat olla:
  - Ostoskorin perustoiminnallisuus: tuotteiden lisäys ja poisto
  - Ostosten maksaminen ja toimitustavan valinta

. . .

- Tavoitteen lyhyt kuvaus parempi monille ohjelmiston sidosryhmille, joita ei kiinnosta seurata tapahtumia yksittäisten storyjen tarkkuudella

# Sprintiin valittavat storyt

- Sprintin tavoitteen asettamisen lisäksi tulee valita backlogista sprintin aikana toteutettavat storyt
- Kehitystiimi päättää kuinka monta storya sprinttiin otetaan

. . .

- Jos velositeetti on selvillä, on valinta periaatteessa helppo

![](https://ohjelmistotuotanto-hy.github.io/images/2-16.png){ width=230 }

- Jos velositettia ei tiedossa, käytetään harkintaa
# 

- Product ownerilla on mahdollisuuksia vaikuttaa sprinttiin mukaan otettaviin storyihin tekemällä uudelleenpriorisointia

![](https://ohjelmistotuotanto-hy.github.io/images/2-17.png){ width=200 }

- Entä jos myös D halutaan sprinttiin?

#

- Uudelleenpriorisoidaan

![](https://ohjelmistotuotanto-hy.github.io/images/2-18.png){ width=200 }

. . .

- Entä jos myös A halutaan mukaan?

#

- Pienennetään A:n kuvaamaa toiminnallisuutta

![](https://ohjelmistotuotanto-hy.github.io/images/2-19.png){ width=200 }

. . .

- Entä jos A ei saa pienentyä

#

- Jaetaan A kahteen osaan: tärkeämpään ja vähemmän tärkeään

![](https://ohjelmistotuotanto-hy.github.io/images/2-20.png){ width=200 }

# Miten sprintin tavoitteeseen päästään?

- Sprintin suunnittelun yhteydessä sprinttiin valituille User storyille tehdään karkean tason suunnittelu
- Mietitään mitä teknisen tason tehtäviä (task) on toteutettava, jotta user story saadaan valmiiksi

. . .

- Suunnitellaan komponentteja ja rajapintoja karkealla tasolla
- Huomioidaan user storyn aiheuttamat muutokset olemassa olevaan osaan sovelluksesta

. . .

- Kaikkia storyyn liittyviä taskeja ei sprintin suunnittelun aikana löydetä
- Uusia taskeja generoidaan tarvittaessa sprintin edetessä

# Storyn jako taskeihin, esimerkki

- Esimerkiksi _tuotteen lisääminen ostoskoriin_, voitaisiin pilkkoa seuraaviin taskeihin:
  - tarvitaan sessio, joka muistaa asiakkaan 
  - domain-olio ostoskorin ja ostoksen esittämiseen 
  - laajennus tietokantaskeemaan 
  - html-näkymää päivitettävä tarvittavilla painikkeilla
  - kontrolleri painikkeiden käsittelyyn
  - yksikkötestit kontrollerille ja domain-olioille 
  - hyväksymätestien automatisointi

# Sprint backlog
  
- Sprint backlog koostuu sprintiin valituista storeista ja niihin liittyvistä tehtävistä eli taskeista
- Sprint backlog usein organisoitu taskboardiksi

![](https://ohjelmistotuotanto-hy.github.io/images/2-21.png){ width=250 }

- Taskit niiden valmistumisastetta kuvaavassa sarakkeessa

#

![](https://ohjelmistotuotanto-hy.github.io/images/2-23.jpg){ width=350 }

- Taskeilla voi olla muitakin statuksia

# Taskien työmääräarviot ja sprintin burndown

- Sprintissä arvioidaan päivittäin jäljellä olevaksi arvioitua työmäärää
- Usein arviot tunteina

![](https://ohjelmistotuotanto-hy.github.io/images/2-22.png){ width=450 }

# WIP-rajoitteet

- Yhtä aikaa työn alla olevien taskien suuri määrä voi koitua ongelmaksi
- Riski sille, että sprintin päätyttyä paljon osittain valmiita storyja kasvaa

. . .

- Ratkaisu: _work in progress eli WIP_ -rajoitteet
  
![](https://ohjelmistotuotanto-hy.github.io/images/2-25.png){ width=300 }

# Kanban ja Lean

- WIP-rajoitusten idea on peräisin _Kanban_-menetelmästä, joka on eräs keskeisimmistä _Lean_-ajattelun työkaluista

. . .

- Lean-ajattelun taustalla on idea _hukan_ eli asiakkaalle arvoa tuottamattomien asioiden eliminoimisessa
- Lean-ajattelu on peräisin jo kymmeniä vuosia vanhasta Toyota Production Systemistä

. . .

- Turhuuksia: osittain tehty työ, välivarastointi ja turha odottaminen
  - Työn alla olevat storyt jotka eivät ole vielä DoD-tasolla valmiina edustavat hukkaa
  - testaamista odottavien toiminnallisuuksien katsotaan olevan välivarastoituna
  - samoin testatut mutta tuotantoon viemistä vielä odottavat toiminnallisuudet 

. . .  

- Toiminnallisuudet tuovat arvoa vasta kun ne saadaan käyttöön, sitä ennen ne sitovat turhaan kustannuksia ja aiheuttavat harmia

# WIP-rajoitteiden soveltaminen

- WIP-rajoitteita voidaan soveltaa Scrumin yhteydessä monella tapaa

. . .  

- Järkevintä on rajoittaa sprintin aikana yhtäaikaa työn alla olevien storyjen määrää mahdollisimman pieneksi
- On myös tavallista rajoittaa eri työvaiheessa, esim. toteutuksen olevien taskien määrää 
- tai yksittäisellä sovelluskehittäjän kerrallaan työn alla olevien töiden määrää

. . .

- WIP-rajoitteita säädetään usein retrospektiivien yhteydessä jos kehitystyössä havaitaan ongelmia

#

# Julkaisun suunnittelu ja projektin roadmap

- Useamman sprintin yli ulottuvaa suunnittelua kutsutaan _julkaisun suunnitteluksi_

. . .

- Jakaa backlogin isompiin teemallisiin kokonaisuuksiin
  - milestone/release 1: verkkokaupan perustoiminnallisuus
  - milestone/release 2: tuotteiden arvostelu ja arvosteluihin perustuva suosittelu
  - milestone/release 3: käyttäjien ostoshistoriaan liittyvä tuotteiden suosittelu

![](https://ohjelmistotuotanto-hy.github.io/images/2-10.png){ width=250 }

# User story mapping

- Kokonaisuus voi olla vaikeaa hahmottaa backlogin tarjoamasta lineaarisesta näkymästä

![](https://ohjelmistotuotanto-hy.github.io/images/2-15.png){ width=350 }

- Rivit sprinttejä/julkaisuja
